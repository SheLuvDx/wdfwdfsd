"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8458],{99553:function(e,t,n){n.d(t,{M4:function(){return p},gF:function(){return m},kS:function(){return u},x4:function(){return l},y1:function(){return d}});var r,a=n(47568),o=n(97582),s=n(3793),c=n(25629),i=n(45528),u=function(){return(0,s.Wg)(c.PATH_RESOURCE.BRAFLIX+"/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(i.B.getToken())}})},l=(r=(0,a.Z)(function(e){var t;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,s.Wg)(c.PATH_RESOURCE.BRAFLIX+"/auth/login",{method:"POST",body:{username:e.username,password:e.password,captchaToken:e.captchaToken}})];case 1:return[2,t.sent()]}})}),function(e){return r.apply(this,arguments)}),d=function(e){return(0,s.Wg)(c.PATH_RESOURCE.BRAFLIX+"/auth/register",{method:"POST",body:{username:e.username,email:e.email,password:e.password,captchaToken:e.captchaToken}})},m=function(e){return(0,s.Wg)(c.PATH_RESOURCE.BRAFLIX+"/auth/ask-recovery",{method:"POST",body:{login:e.login,type:e.login.includes("@")?"EMAIL":"USERNAME",captchaToken:e.captchaToken}})},p=function(e,t){return(0,s.Wg)(c.PATH_RESOURCE.BRAFLIX+"/auth/recovery",{method:"POST",body:{newPassword:e,token:t}})}},46978:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(26042),a=n(69396),o=n(99534),s=n(85893),c=n(25746);n(67294);var i,u=function(e){var t=e.className,n=(0,o.Z)(e,["className"]);return(0,s.jsx)("svg",(0,a.Z)((0,r.Z)({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",className:(0,c.Z)("w-10 h-10 md:w-14 md:h-14 animate-spin text-primary",t)},n),{children:(0,s.jsx)("path",{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"})}))}},88458:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(47568),a=n(97582),o=n(85893),s=n(69107),c=n(45528),i=n(74537),u=n(46978),l=n(18403),d=n(48228),m=n(13025),p=n(42746),f=n(5152),x=n.n(f),h=n(11163),g=n(67294),b=n(4511),j=n(86501),w=n(99553),y=x()(function(){return n.e(1697).then(n.bind(n,1697))},{loadableGenerated:{webpack:function(){return[1697]}},ssr:!1}),v=x()(function(){return n.e(2245).then(n.bind(n,72245))},{loadableGenerated:{webpack:function(){return[72245]}},ssr:!1}),k=function(e){var t=e.setShowPrompt,n=e.message,i=(0,g.useRef)(),m=(0,p.useTranslations)("Account"),f=(0,s.E)(),x=f.setIsLoggedIn,b=f.setUsername,v=(0,g.useState)(""),k=v[0],C=v[1],A=(0,g.useState)(""),N=A[0],S=A[1],_=(0,g.useState)(""),T=_[0],L=_[1],E=(0,g.useState)("login"),R=E[0],W=E[1],P=(0,g.useState)(!1),U=P[0],z=P[1],F=(0,h.useRouter)(),Z=(0,d.D)({mutationFn:function(e){return(0,w.x4)(e)},onSuccess:function(e){c.B.setToken(e.token),x(!0),b(e.username),F.reload()},onError:function(e){400==e.statusCode?j.toast.error(m("invalid_captcha")):j.toast.error(m("incorrect_credentials")),i.current.reset(),L(""),C("")}}).mutate,B=(0,d.D)({mutationFn:function(e){return(0,w.y1)(e)},onSuccess:function(){j.toast.success(m("register_successfully")),Z({username:k,password:T,captchaToken:""})},onError:function(e){400==e.statusCode?j.toast.error(m("existing_credentials")):j.toast.error(m("invalid_captcha")),i.current.reset(),S(""),C(""),L("")}}).mutate,O=(0,d.D)({mutationFn:function(e){return(0,w.gF)(e)},onSuccess:function(){j.toast.success(m("recovery_sent")),M()},onError:function(e){400==e.statusCode?j.toast.error(m("invalid_captcha")):j.toast.error(m("recovery_error")),C("")}}),I=O.mutate,X=O.isLoading;(0,g.useEffect)(function(){S(""),C(""),L("")},[R,U]);var H,M=(0,g.useCallback)(function(){t(!1)},[t]),G=function(e){"login"==R?Z({username:k,password:T,captchaToken:e}):B({username:k,email:N,password:T,captchaToken:e})},q=function(e){I({login:k,captchaToken:e})},D=(H=(0,r.Z)(function(e){return(0,a.__generator)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),!i.current)return[3,3];return[4,i.current.render()];case 1:return t.sent(),[4,i.current.execute()];case 2:t.sent(),t.label=3;case 3:return[2]}})}),function(e){return H.apply(this,arguments)});return X?(0,o.jsxs)(y,{children:[(0,o.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-[100] bg-black/80",onClick:M}),(0,o.jsx)("div",{className:"fixed z-[200] w-11/12 p-8 -translate-x-1/2 -translate-y-1/2 rounded-md left-1/2 top-1/2 md:w-1/3",children:(0,o.jsx)("div",{className:"w-full flex justify-center",children:(0,o.jsx)(u.Z,{className:"w-10 h-10 md:w-12 md:h-12"})})})]}):U?(0,o.jsxs)(y,{children:[(0,o.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-[100] bg-black/80",onClick:M}),(0,o.jsxs)("div",{className:"fixed z-[200] w-11/12 p-8 border border-[var(--gray18)] -translate-x-1/2 -translate-y-1/2 rounded-md left-1/2 top-1/2 md:w-1/3 bg-[#0d0d0d]",children:[(0,o.jsx)("div",{className:"flex items-center justify-center p-2 rounded md:mb-4 gap-x-8",children:(0,o.jsx)("h2",{className:"py-2 px-4",children:m("recover_password")})}),(0,o.jsxs)("form",{onSubmit:D,children:[(0,o.jsxs)("div",{className:"flex flex-col items-center gap-y-4",children:[(0,o.jsx)("input",{type:"text",placeholder:m("email_username"),value:k,required:!0,onChange:function(e){C(e.currentTarget.value.toLowerCase())},className:"p-2 rounded border-2 border-[var(--gray18)] bg-transparent focus:outline-none w-full"}),(0,o.jsx)(l.Nc,{ref:i,onSuccess:function(e){q(e)},options:{execution:"execute",appearance:"always",action:"forgot-password",theme:"dark",language:"auto"},siteKey:"0x4AAAAAAASnWjYr6tjWXUUL"})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center mt-8 gap-x-4",children:[(0,o.jsx)("button",{type:"submit",className:"flex items-center justify-center px-4 text-base font-medium text-white rounded-lg bg-primary buttonAnimation h-9 md:px-10 gap-x-2",children:m("send")}),(0,o.jsx)("button",{onClick:M,className:"flex items-center justify-center px-4 text-base font-medium text-white bg-transparent border border-white rounded-lg h-9 buttonAnimation disabled:cursor-not-allowed disabled:opacity-80 md:w-auto md:px-10",children:m("cancel")})]})]})]})]}):(0,o.jsxs)(y,{children:[(0,o.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-[100] bg-black/80",onClick:M}),(0,o.jsxs)("div",{className:"fixed z-[200] w-11/12 p-8 border border-[var(--gray18)] -translate-x-1/2 -translate-y-1/2 rounded-md left-1/2 top-1/2 md:w-1/3 bg-[#0d0d0d]",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center p-2 rounded md:mb-4 gap-x-8",children:[(0,o.jsx)("button",{className:"".concat("login"==R&&"border-b-2 border-[var(--primary)]"," py-2 px-4"),onClick:function(){W("login")},children:m("login")}),(0,o.jsx)("button",{className:"".concat("signup"==R&&"border-b-2 border-[var(--primary)]"," py-2 px-4"),onClick:function(){W("signup")},children:m("register")})]}),(0,o.jsxs)("form",{onSubmit:D,children:[(0,o.jsxs)("div",{className:"flex flex-col items-center gap-y-4",children:[(0,o.jsx)("h1",{className:"text-[var(--primary)] text-center",children:n}),(0,o.jsx)("input",{type:"text",placeholder:m("username"),value:k,minLength:4,maxLength:16,pattern:"[a-z0-9]*",required:!0,onChange:function(e){C(e.currentTarget.value.toLowerCase())},className:"p-2 rounded border-2 border-[var(--gray18)] bg-transparent focus:outline-none w-full"}),"signup"==R&&(0,o.jsx)("input",{type:"email",placeholder:"Email",value:N,maxLength:254,pattern:"[a-z0-9._\\-]+@[a-z0-9.\\-]+\\.[a-z]{2,}$",required:!0,onChange:function(e){S(e.currentTarget.value.toLowerCase())},className:"p-2 rounded border-2 border-[var(--gray18)] bg-transparent focus:outline-none w-full"}),(0,o.jsx)("input",{type:"password",placeholder:m("password"),value:T,minLength:8,maxLength:32,required:!0,onChange:function(e){L(e.currentTarget.value)},className:"p-2 rounded border-2 border-[var(--gray18)] bg-transparent focus:outline-none w-full"}),"login"==R?(0,o.jsx)(l.Nc,{ref:i,onSuccess:function(e){G(e)},options:{execution:"execute",appearance:"always",action:"login",theme:"dark",language:"auto"},siteKey:"0x4AAAAAAASnWjYr6tjWXUUL"}):(0,o.jsx)(l.Nc,{ref:i,onSuccess:function(e){G(e)},options:{execution:"execute",appearance:"always",action:"register",theme:"dark",language:"auto"},siteKey:"0x4AAAAAAASnWjYr6tjWXUUL"}),"login"==R&&(0,o.jsx)("p",{onClick:function(){return z(!0)},className:"cursor-pointer hover:text-[var(--primary)]",children:m("forgot_password")})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center mt-8 gap-x-4",children:[(0,o.jsx)("button",{type:"submit",className:"flex items-center justify-center px-4 text-base font-medium text-white rounded-lg bg-primary buttonAnimation h-9 md:px-10 gap-x-2",children:"login"==R?m("login"):m("register")}),(0,o.jsx)("button",{onClick:M,className:"flex items-center justify-center px-4 text-base font-medium text-white bg-transparent border border-white rounded-lg h-9 buttonAnimation disabled:cursor-not-allowed disabled:opacity-80 md:w-auto md:px-10",children:m("cancel")})]})]})]})]})},C=function(e){var t=e.mode,n=void 0===t?"":t,r=e.message,a=(0,g.useState)(!1),s=a[0],c=a[1],i=(0,p.useTranslations)("Header"),u=(0,p.useTranslations)("Account");return(0,o.jsxs)(g.Fragment,{children:["history"==n?(0,o.jsx)("p",{onClick:function(){return c(!0)},children:i("history")}):"watchlist"==n?(0,o.jsx)("p",{onClick:function(){return c(!0)},children:i("watchlist")}):"addWatchlist"==n?(0,o.jsx)(v,{onClick:function(){return c(!0)}}):"subtitles"==n?(0,o.jsx)("button",{onClick:function(){return c(!0)},className:"inline-flex w-full items-center justify-center h-10 gap-3 px-8 font-medium text-white bg-[var(--primary)] rounded-md focus:outline-none buttonAnimation hover:opacity-80 md:px-10",children:u("save_to_account")}):"downloadSource"==n?(0,o.jsx)("button",{onClick:function(){return c(!0)},children:(0,o.jsx)(m.Z,{})}):(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",className:"w-6 h-6 cursor-pointer",onClick:function(){return c(!0)},children:[(0,o.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,o.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,o.jsx)("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),s?(0,o.jsx)(k,{setShowPrompt:c,message:r}):null]})},A=(0,b.Pf)(C,{FallbackComponent:i.Z})}}]);